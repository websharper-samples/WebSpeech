function ignore(){}function id(n){return n}function fst(n){return n[0]}function snd(n){return n[1]}function trd(n){return n[2]}IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i in n)t[i]=n[i];return t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};IntelliFactory.Runtime.OnLoad(function(){self.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});console||(console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore});
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK;a=self;b=a.Site=a.Site||{};c=b.Client=b.Client||{};d=b.Samples=b.Samples||{};e=d.Set=d.Set||{};f=a.WebSharper=a.WebSharper||{};g=f.JavaScript=f.JavaScript||{};h=g.JS=g.JS||{};i=d.Sample=d.Sample||{};j=f.Operators=f.Operators||{};k=f.Obj=f.Obj||{};l=f.UI=f.UI||{};m=l.HtmlModule=l.HtmlModule||{};n=m.attr=m.attr||{};o=f.List=f.List||{};p=l.Doc=l.Doc||{};q=a.StartupCode$SpeechAPISamples$Client=a.StartupCode$SpeechAPISamples$Client||{};r=o.T=o.T||{};s=a.EventTarget;t=a.WindowOrWorkerGlobalScope;u=a.Node;v=f.Unchecked=f.Unchecked||{};w=l.AttrProxy=l.AttrProxy||{};x=g.Pervasives=g.Pervasives||{};y=l.AttrModule=l.AttrModule||{};z=l.Array=l.Array||{};A=l.Client=l.Client||{};B=A.Templates=A.Templates||{};C=b.SpeechUtterance=b.SpeechUtterance||{};D=b.SpeechSynthesis=b.SpeechSynthesis||{};E=l.Attrs=l.Attrs||{};F=l.DomUtility=l.DomUtility||{};G=l.View=l.View||{};H=f.Arrays=f.Arrays||{};I=a.Object;J=f.Collections=f.Collections||{};K=J.Dictionary=J.Dictionary||{};L=f.Seq=f.Seq||{};M=a.StartupCode$SpeechAPISamples$SpeechUtterance=a.StartupCode$SpeechAPISamples$SpeechUtterance||{};N=a.StartupCode$SpeechAPISamples$SpeechSynthesis=a.StartupCode$SpeechAPISamples$SpeechSynthesis||{};O=l.Docs=l.Docs||{};P=l.Snap=l.Snap||{};Q=l.DocElemNode=l.DocElemNode||{};R=a.CharacterData;S=f.Enumerator=f.Enumerator||{};T=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};U=J.HashSet=J.HashSet||{};V=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};W=d.Builder=d.Builder||{};X=S.T=S.T||{};Y=l.An=l.An||{};Z=A.Settings=A.Settings||{};_0=l.Abbrev=l.Abbrev||{};_1=_0.Mailbox=_0.Mailbox||{};_2=l.Elt=l.Elt||{};_3=A.Attrs=A.Attrs||{};_4=_3.Dyn=_3.Dyn||{};_5=J.DictionaryUtil=J.DictionaryUtil||{};_6=B.Prepare=B.Prepare||{};_7=f.Slice=f.Slice||{};_8=J.KeyCollection=J.KeyCollection||{};_9=l.Var$1=l.Var$1||{};_=l.Var=l.Var||{};$=a.Event;ba=D.Utils=D.Utils||{};bb=A.Docs=A.Docs||{};bc=bb.RunState=bb.RunState||{};bd=bb.NodeSet=bb.NodeSet||{};be=l.Anims=l.Anims||{};bf=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bg=l.Updates=l.Updates||{};bh=f.Strings=f.Strings||{};bi=l.ConcreteVar=l.ConcreteVar||{};bj=_0.Fresh=_0.Fresh||{};bk=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bl=f.Concurrency=f.Concurrency||{};bm=l.AppendList=l.AppendList||{};bn=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bo=J.HashSetUtil=J.HashSetUtil||{};bp=l.Easing=l.Easing||{};bq=bl.AsyncBody=bl.AsyncBody||{};br=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bs=bl.CT=bl.CT||{};bt=_0.HashSet=_0.HashSet||{};bu=f.Queue=f.Queue||{};bv=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};bw=bl.Scheduler=bl.Scheduler||{};bx=f.CancellationTokenSource=f.CancellationTokenSource||{};by=bb.DomNodes=bb.DomNodes||{};bz=a.Error;bA=f.OperationCanceledException=f.OperationCanceledException||{};bB=f.Lazy=f.Lazy||{};bC=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bD=f.LazyExtensionsProxy=f.LazyExtensionsProxy||{};bE=bD.LazyRecord=bD.LazyRecord||{};bF=l.DynamicAttrNode=l.DynamicAttrNode||{};bG=a.IntelliFactory;bH=bG&&bG.Runtime;bI=a.console;bJ=a.jQuery;bK=a.Date;c.Main=function(){return c.All().Show();};c.All=function(){q.$cctor();return q.All;};e=d.Set=bH.Class({Show:function(){var bL;bL=this;return a.jQuery(function(){var bM;function bN(bO,bP){a.jQuery("#sample-navs ul").children("li").removeClass("active");a.jQuery(bP).addClass("active");return bO.Show();}self.document;bM=p.Element("ul",[w.Create("class","nav nav-pills")],[p.Concat(o.mapi(function(bO,bP){return p.Element("li",[y.OnAfterRender(function(bQ){if(bO===0)bN(bP,bQ);}),y.Handler("click",function(bQ){return function(){return bN(bP,bQ);};})],[p.Element("a",[w.Create("href","#")],[p.TextNode(bP.Title)])]);},bL.$0))]);B.LoadLocalTemplates("");return p.RunById("sample-navs",bM);});}},null,e);e.Singleton=function(bL){return new e({$:0,$0:o.ofArray([bL])});};e.Create=function(bL){return new e({$:0,$0:o.ofSeq(L.delay(function(){return L.collect(function(bM){return bM.$0;},bL);}))});};h.GetFieldValues=function(bL){var bM,bN;bM=[];for(var bO in bL)bM.push(bL[bO]);return bM;};i=d.Sample=bH.Class({Show:function(){var bL,bM,bN,bO;bL=this;bM=self.document.getElementById("sample-main");bN=self.document.getElementById("sample-side");d.Clear(bM);d.Clear(bN);this.Render(bM);bO=p.Concat([p.Element("div",[y.OnAfterRender(function(bP){var bQ,bR;bQ=self.document.getElementById(bL.Id);v.Equals(bQ,null)?void 0:(bR=bQ.cloneNode(true),bR.attributes.removeNamedItem("id"),bP.appendChild(bR));})],[]),p.Element("a",[w.Create("class","btn btn-primary btn-lg"),w.Create("href","http://github.com/intellifactory/websharper.webspeech/blob/master/Site/"+this.FileName)],[p.TextNode("Source")])]);B.LoadLocalTemplates("");p.Run(bN,bO);}},null,i);i.New=function(bL,bM,bN,bO,bP){return new i({FileName:bL,Id:bM,Keywords:bN,Render:bO,Title:bP});};j.FailWith=function(bL){throw new bz(bL);};j.KeyValue=function(bL){return[bL.K,bL.V];};k=f.Obj=bH.Class({Equals:function(bL){return this===bL;},GetHashCode:function(){return -1;}},null,k);k.New=bH.Ctor(function(){},k);n=m.attr=bH.Class({},k,n);o.mapi=function(bL,bM){var bN,bO,bP,bQ,bR,bS;if(bM.$==0)return bM;else{bR=new r({$:1});bN=bR;bO=bM;bP=0;bQ=true;while(bQ){bN.$0=bL(bP,bO.$0);bO=bO.$1;bO.$==0?bQ=false:(bN=(bS=new r({$:1}),bN.$1=bS,bS),bP=bP+1);}bN.$1=r.Empty;return bR;}};o.ofArray=function(bL){var bM,bN,bO;bM=r.Empty;for(bN=H.length(bL)-1,bO=0;bN>=bO;bN--)bM=new r({$:1,$0:H.get(bL,bN),$1:bM});return bM;};o.ofSeq=function(bL){var bM,bN,bO,bP,bQ,bR;if(bL instanceof r)return bL;else if(bL instanceof a.Array)return o.ofArray(bL);else{bM=S.Get(bL);try{bO=bM.MoveNext();if(!bO)bN=r.Empty;else{bQ=new r({$:1});bP=bQ;while(bO){bP.$0=bM.Current();bM.MoveNext()?bP=(bR=new r({$:1}),bP.$1=bR,bR):bO=false;}bP.$1=r.Empty;bN=bQ;}return bN;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}}};o.head=function(bL){return bL.$==1?bL.$0:o.listEmpty();};o.tail=function(bL){return bL.$==1?bL.$1:o.listEmpty();};o.listEmpty=function(){return j.FailWith("The input list was empty.");};o.map=function(bL,bM){var bN,bO,bP,bQ,bR;if(bM.$==0)return bM;else{bQ=new r({$:1});bN=bQ;bO=bM;bP=true;while(bP){bN.$0=bL(bO.$0);bO=bO.$1;bO.$==0?bP=false:bN=(bR=new r({$:1}),bN.$1=bR,bR);}bN.$1=r.Empty;return bQ;}};p=l.Doc=bH.Class({},k,p);p.Concat=function(bL){var bM;bM=z.ofSeqNonCopying(bL);return z.TreeReduce(p.get_Empty(),p.Append,bM);};p.TextNode=function(bL){return p.Mk({$:5,$0:F.CreateText(bL)},G.Const());};p.Append=function(bL,bM){return p.Mk({$:0,$0:bL.docNode,$1:bM.docNode},G.Map2Unit(bL.updates,bM.updates));};p.get_Empty=function(){return p.Mk(null,G.Const());};p.RunById=function(bL,bM){var bN;bN=F.Doc().getElementById(bL);v.Equals(bN,null)?j.FailWith("invalid id: "+bL):p.Run(bN,bM);};p.Run=function(bL,bM){O.LinkElement(bL,bM.docNode);p.RunInPlace(false,bL,bM);};p.Element=function(bL,bM,bN){var bO,bP;bO=w.Concat(bM);bP=p.Concat(bN);return _2.New(F.CreateElement(bL),bO,bP);};p.Mk=function(bL,bM){return new p.New(bL,bM);};p.RunInPlace=function(bL,bM,bN){var bO;bO=O.CreateRunState(bM,bN.docNode);G.Sink(Y.get_UseAnimations()||Z.BatchUpdatesEnabled()?_1.StartProcessor(O.PerformAnimatedUpdate(bL,bO,bN.docNode)):function(){O.PerformSyncUpdate(bL,bO,bN.docNode);},bN.updates);};p.TextView=function(bL){var bM;bM=O.CreateTextNode();return p.Mk({$:4,$0:bM},G.Map(function(bN){O.UpdateTextNode(bM,bN);},bL));};p.InputArea=function(bL,bM){return p.InputInternal("textarea",function(){return L.append(bL,[y.Value(bM)]);});};p.InputInternal=function(bL,bM){var bN;bN=F.CreateElement(bL);return _2.New(bN,w.Concat(bM(bN)),p.get_Empty());};p.New=bH.Ctor(function(bL,bM){k.New.call(this);this.docNode=bL;this.updates=bM;},p);q.$cctor=function(){q.$cctor=a.ignore;q.All=e.Create([e.Singleton(C.Sample()),e.Singleton(D.Sample())]);};r=o.T=bH.Class({GetEnumerator:function(){return new X.New(this,null,function(bL){var bM;bM=bL.s;return bM.$==0?false:(bL.c=bM.$0,bL.s=bM.$1,true);},void 0);},GetEnumerator0:function(){return S.Get(this);}},null,r);r.Empty=new r({$:0});d.Clear=function(bL){while(bL.hasChildNodes())bL.removeChild(bL.firstChild);};d.Build=function(){return W.New(null,null,r.Empty,null,null);};d.req=function(bL,bM){return bM!=null&&bM.$==1?bM.$0:j.FailWith("Required property not set: "+bL);};d.op_PlusPlus=function(bL,bM){return bL==null?bM:bL;};v.Equals=function(bL,bM){var bN,bO,bP,bQ;if(bL===bM)return true;else{bN=typeof bL;if(bN=="object"){if(bL===null||bL===void 0||bM===null||bM===void 0)return false;else if("Equals"in bL)return bL.Equals(bM);else if(bL instanceof a.Array&&bM instanceof a.Array)return v.arrayEquals(bL,bM);else if(bL instanceof a.Date&&bM instanceof a.Date)return v.dateEquals(bL,bM);else{bO=[true];for(var bR in bL)if(function(bS){bO[0]=!bL.hasOwnProperty(bS)||bM.hasOwnProperty(bS)&&v.Equals(bL[bS],bM[bS]);return!bO[0];}(bR))break;if(bO[0]){for(var bS in bM)if(function(bT){bO[0]=!bM.hasOwnProperty(bT)||bL.hasOwnProperty(bT);return!bO[0];}(bS))break;}return bO[0];}}else return bN=="function"&&("$Func"in bL?bL.$Func===bM.$Func&&bL.$Target===bM.$Target:"$Invokes"in bL&&"$Invokes"in bM&&v.arrayEquals(bL.$Invokes,bM.$Invokes));}};v.arrayEquals=function(bL,bM){var bN,bO;if(H.length(bL)===H.length(bM)){bN=true;bO=0;while(bN&&bO<H.length(bL)){!v.Equals(H.get(bL,bO),H.get(bM,bO))?bN=false:void 0;bO=bO+1;}return bN;}else return false;};v.dateEquals=function(bL,bM){return bL.getTime()===bM.getTime();};v.Compare=function(bL,bM){var bN,bO,bP,bQ,bR,bS;if(bL===bM)return 0;else{bO=typeof bL;switch(bO=="function"?1:bO=="boolean"?2:bO=="number"?2:bO=="string"?2:bO=="object"?3:0){case 0:return typeof bM=="undefined"?0:-1;case 1:return j.FailWith("Cannot compare function values.");case 2:return bL<bM?-1:1;case 3:if(bL===null)bP=-1;else if(bM===null)bP=1;else if("CompareTo"in bL)bP=bL.CompareTo(bM);else if("CompareTo0"in bL)bP=bL.CompareTo0(bM);else if(bL instanceof a.Array&&bM instanceof a.Array)bP=v.compareArrays(bL,bM);else if(bL instanceof a.Date&&bM instanceof a.Date)bP=v.compareDates(bL,bM);else{bQ=[0];for(var bT in bL)if(function(bU){return!bL.hasOwnProperty(bU)?false:!bM.hasOwnProperty(bU)?(bQ[0]=1,true):(bQ[0]=v.Compare(bL[bU],bM[bU]),bQ[0]!==0);}(bT))break;if(bQ[0]===0){for(var bU in bM)if(function(bV){return!bM.hasOwnProperty(bV)?false:!bL.hasOwnProperty(bV)&&(bQ[0]=-1,true);}(bU))break;}bP=bQ[0];}return bP;}}};v.Hash=function(bL){var bM;bM=typeof bL;return bM=="function"?0:bM=="boolean"?bL?1:0:bM=="number"?bL:bM=="string"?v.hashString(bL):bM=="object"?bL==null?0:bL instanceof a.Array?v.hashArray(bL):v.hashObject(bL):0;};v.compareArrays=function(bL,bM){var bN,bO;if(H.length(bL)<H.length(bM))return -1;else if(H.length(bL)>H.length(bM))return 1;else{bN=0;bO=0;while(bN===0&&bO<H.length(bL)){bN=v.Compare(H.get(bL,bO),H.get(bM,bO));bO=bO+1;}return bN;}};v.compareDates=function(bL,bM){return v.Compare(bL.getTime(),bM.getTime());};v.hashString=function(bL){var bM,bN,bO;if(bL===null)return 0;else{bM=5381;for(bN=0,bO=bL.length-1;bN<=bO;bN++)bM=v.hashMix(bM,bL[bN].charCodeAt());return bM;}};v.hashArray=function(bL){var bM,bN,bO;bM=-34948909;for(bN=0,bO=H.length(bL)-1;bN<=bO;bN++)bM=v.hashMix(bM,v.Hash(H.get(bL,bN)));return bM;};v.hashObject=function(bL){var bM,bN;if("GetHashCode"in bL)return bL.GetHashCode();else{bM=[0];for(var bO in bL)if(function(bP){bM[0]=v.hashMix(v.hashMix(bM[0],v.hashString(bP)),v.Hash(bL[bP]));return false;}(bO))break;return bM[0];}};v.hashMix=function(bL,bM){return(bL<<5)+bL+bM;};w=l.AttrProxy=bH.Class({},null,w);w.Create=function(bL,bM){return E.Static(function(bN){F.SetAttr(bN,bL,bM);});};w.Concat=function(bL){var bM;bM=z.ofSeqNonCopying(bL);return z.TreeReduce(E.EmptyAttr(),w.Append,bM);};w.Append=function(bL,bM){return E.AppendTree(bL,bM);};x.NewFromSeq=function(bL){var bM,bN,bO;bM={};bN=S.Get(bL);try{while(bN.MoveNext()){bO=bN.Current();bM[bO[0]]=bO[1];}}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}return bM;};y.OnAfterRender=function(bL){return new w({$:4,$0:bL});};y.Handler=function(bL,bM){return E.Static(function(bN){bN.addEventListener(bL,function(bO){return(bM(bN))(bO);},false);});};y.Value=function(bL){function bM(bN){return{$:1,$0:bN};}return y.CustomValue(bL,a.id,function(bN){return bM(a.id(bN));});};y.CustomValue=function(bL,bM,bN){return y.CustomVar(bL,function(bO,bP){bO.value=bM(bP);},function(bO){return bN(bO.value);});};y.CustomVar=function(bL,bM,bN){function bO(bQ,bR){return bL.UpdateMaybe(function(bS){var bT,bU;bT=bN(bQ);return bT!=null&&bT.$==1&&(!v.Equals(bT.$0,bS)&&(bU=[bT,bT.$0],true))?bU[0]:null;});}function bP(bQ,bR){var bS,bT;bS=bN(bQ);return bS!=null&&bS.$==1&&(v.Equals(bS.$0,bR)&&(bT=bS.$0,true))?null:bM(bQ,bR);}return w.Concat([y.Handler("change",function(bQ){return function(bR){return bO(bQ,bR);};}),y.Handler("input",function(bQ){return function(bR){return bO(bQ,bR);};}),y.Handler("keypress",function(bQ){return function(bR){return bO(bQ,bR);};}),y.DynamicCustom(function(bQ){return function(bR){return bP(bQ,bR);};},bL.get_View())]);};y.DynamicCustom=function(bL,bM){return E.Dynamic(bM,bL);};z.ofSeqNonCopying=function(bL){var bM,bN;if(bL instanceof a.Array)return bL;else if(bL instanceof r)return H.ofList(bL);else if(bL===null)return[];else{bM=[];bN=S.Get(bL);try{while(bN.MoveNext())bM.push(bN.Current());return bM;}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}}};z.TreeReduce=function(bL,bM,bN){var bO;function bP(bQ,bR){var bS,bT;return bR<=0?bL:bR===1&&(bQ>=0&&bQ<bO)?H.get(bN,bQ):(bT=bR/2>>0,bM(bP(bQ,bT),bP(bQ+bT,bR-bT)));}bO=H.length(bN);return bP(0,bO);};z.MapTreeReduce=function(bL,bM,bN,bO){var bP;function bQ(bR,bS){var bT,bU;return bS<=0?bM:bS===1&&(bR>=0&&bR<bP)?bL(H.get(bO,bR)):(bU=bS/2>>0,bN(bQ(bR,bU),bQ(bR+bU,bS-bU)));}bP=H.length(bO);return bQ(0,bP);};B.LoadLocalTemplates=function(bL){!B.LocalTemplatesLoaded()?(B.set_LocalTemplatesLoaded(true),B.LoadNestedTemplates(self.document.body,"")):void 0;B.LoadedTemplates().set_Item(bL,B.LoadedTemplateFile(""));};B.LocalTemplatesLoaded=function(){T.$cctor();return T.LocalTemplatesLoaded;};B.set_LocalTemplatesLoaded=function(bL){T.$cctor();T.LocalTemplatesLoaded=bL;};B.LoadNestedTemplates=function(bL,bM){var bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1;function bN(b2){var b3,b4;if(!bO.ContainsKey(b2)){b3=(b4=null,[bP.TryGetValue(b2,{get:function(){return b4;},set:function(b5){b4=b5;}}),b4]);b3[0]?(b1.Add(b2),bP.Remove(b2),B.PrepareTemplateStrict(bM,{$:1,$0:b2},b3[1][0],{$:1,$0:b3[1][1]},{$:1,$0:bN})):bI.warn(b1.Contains(b2)?"Encountered loop when instantiating "+b2:"Local template does not exist: "+b2);}}bO=B.LoadedTemplateFile(bM);bP=new K.New$5();bQ=bL.querySelectorAll("[ws-template]");for(bR=0,bS=bQ.length-1;bR<=bS;bR++){bT=bQ[bR];bU=bT.getAttribute("ws-template").toLowerCase();bT.removeAttribute("ws-template");bP.set_Item(bU,[[bT],B.FakeRootSingle(bT)]);}bV=bL.querySelectorAll("[ws-children-template]");for(bW=0,bX=bV.length-1;bW<=bX;bW++){bY=bV[bW];bZ=bY.getAttribute("ws-children-template").toLowerCase();bY.removeAttribute("ws-children-template");bP.set_Item(bZ,(b0=F.ChildrenArray(bY),[b0,B.FakeRoot(b0)]));}b1=new U.New$3();while(bP.count>0)bN(L.head(bP.get_Keys()));};B.LoadedTemplates=function(){T.$cctor();return T.LoadedTemplates;};B.LoadedTemplateFile=function(bL){var bM,bN,bO;bM=(bN=null,[B.LoadedTemplates().TryGetValue(bL,{get:function(){return bN;},set:function(bP){bN=bP;}}),bN]);return bM[0]?bM[1]:(bO=new K.New$5(),(B.LoadedTemplates().set_Item(bL,bO),bO));};B.FakeRootSingle=function(bL){var bM,bN,bO;bL.removeAttribute("ws-template");bM=bL.getAttribute("ws-replace");bM===null?void 0:(bL.removeAttribute("ws-replace"),bN=bL.parentNode,v.Equals(bN,null)?void 0:(bO=self.document.createElement(bL.tagName),bO.setAttribute("ws-replace",bM),bN.replaceChild(bO,bL)));return B.FakeRoot([bL]);};B.FakeRoot=function(bL){var bM,bN,bO;bM=self.document.createElement("div");for(bN=0,bO=bL.length-1;bN<=bO;bN++)bM.appendChild(H.get(bL,bN));return bM;};B.PrepareTemplateStrict=function(bL,bM,bN,bO,bP){var bQ,bR;function bS(bX,bY){var bZ,b0,b1,b2,b3,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn;function b4(co){}while(true)switch(bX){case 0:if(bY!==null){bZ=bY.nextSibling;if(v.Equals(bY.nodeType,u.TEXT_NODE))_6.convertTextNode(bY);else if(v.Equals(bY.nodeType,u.ELEMENT_NODE))bU(bY);bY=bZ;}else return null;break;case 1:b5=_7.string(bY.nodeName,{$:1,$0:3},null).toLowerCase();b6=(b0=b5.indexOf("."),b0===-1?[bL,b5]:[_7.string(b5,null,{$:1,$0:b0-1}),_7.string(b5,{$:1,$0:b0+1},null)]);b7=b6[1];b8=b6[0];if(b8!==""&&!B.LoadedTemplates().ContainsKey(b8))return _6.failNotLoaded(b7);else{if(b8===""&&bP!=null)bP.$0(b7);b9=B.LoadedTemplates().get_Item(b8);if(!b9.ContainsKey(b7))return _6.failNotLoaded(b7);else{b_=b9.get_Item(b7);b$=b_.cloneNode(true);ca=new U.New$3();cb=new K.New$5();cc=bY.attributes;for(cd=0,ce=cc.length-1;cd<=ce;cd++){cf=cc.item(cd).name.toLowerCase();cb.set_Item(cf,(cg=cc.item(cd).nodeValue,cg===""?cf:cg.toLowerCase()));!ca.Add(cf)?bI.warn("Hole mapped twice",cf):void 0;}for(ch=0,ci=bY.childNodes.length-1;ch<=ci;ch++){cj=bY.childNodes[ch];v.Equals(cj.nodeType,u.ELEMENT_NODE)?!ca.Add(cj.nodeName.toLowerCase())?bI.warn("Hole filled twice",b7):void 0:void 0;}ck=bY.childNodes.length===1&&v.Equals(bY.firstChild.nodeType,u.TEXT_NODE);if(ck){b2=_6.fillTextHole(b$,bY.firstChild.textContent,b7);((function(co){return function(cp){if(cp!=null)co(cp.$0);};}((b3=function(co){return function(cp){return co.Add(cp);};}(ca),function(co){return b4(b3(co));})))(b2));}_6.removeHolesExcept(b$,ca);if(!ck){for(cl=0,cm=bY.childNodes.length-1;cl<=cm;cl++){cn=bY.childNodes[cl];v.Equals(cn.nodeType,u.ELEMENT_NODE)?cn.hasAttributes()?_6.fillInstanceAttrs(b$,cn):bT(b$,cn):void 0;}}_6.mapHoles(b$,cb);_6.fill(b$,bY.parentNode,bY);bY.parentNode.removeChild(bY);return;}}break;}}function bT(bX,bY){var bZ,b1,b2;function b0(b3,b4){var b5,b6,b7;if(b1==="title"&&bY.hasChildNodes()){b5=bJ.parseHTML(bY.textContent);bY.removeChild(bY.firstChild);for(b6=0,b7=b5.length-1;b6<=b7;b6++)bY.appendChild(H.get(b5,b6));}else null;bU(bY);return _6.fill(bY,b3,b4);}b1=bY.nodeName.toLowerCase();F.IterSelector(bX,"[ws-attr-holes]",function(b3){var b4,b5,b6,b7,b8;b4=bh.SplitChars(b3.getAttribute("ws-attr-holes"),[" "],1);for(b5=0,b6=b4.length-1;b5<=b6;b5++){b7=H.get(b4,b5);b3.setAttribute(b7,(b8=new a.RegExp("\\${"+b1+"}","ig"),b3.getAttribute(b7).replace(b8,bY.textContent)));}});b2=bX.querySelector("[ws-hole="+b1+"]");if(v.Equals(b2,null)){bZ=bX.querySelector("[ws-replace="+b1+"]");return v.Equals(bZ,null)?null:(b0(bZ.parentNode,bZ),void bZ.parentNode.removeChild(bZ));}else{while(b2.hasChildNodes())b2.removeChild(b2.lastChild);b2.removeAttribute("ws-hole");return b0(b2,null);}}function bU(bX){if(bh.StartsWith(bX.nodeName.toLowerCase(),"ws-"))bW(bX);else{_6.convertAttrs(bX);bV(bX.firstChild);}}function bV(bX){return bS(0,bX);}function bW(bX){return bS(1,bX);}bQ=bO==null?B.FakeRoot(bN):bO.$0;bR=(bM==null?"":bM.$0).toLowerCase();B.LoadedTemplateFile(bL).set_Item(bR,bQ);H.length(bN)>0?(function(bX){var bY,bZ,b0,b1;while(true){bY=bX.querySelector("[ws-template]");if(v.Equals(bY,null)){bZ=bX.querySelector("[ws-children-template]");if(v.Equals(bZ,null))return null;else{b0=bZ.getAttribute("ws-children-template");bZ.removeAttribute("ws-children-template");B.PrepareTemplateStrict(bL,{$:1,$0:b0},F.ChildrenArray(bZ),null,null);bX=bX;}}else{b1=bY.getAttribute("ws-template");(B.PrepareSingleTemplate(bL,{$:1,$0:b1},bY))(null);bX=bX;}}}(bQ),bV(H.get(bN,0))):void 0;};B.PrepareSingleTemplate=function(bL,bM,bN){var bO,bP,bQ;bO=B.FakeRootSingle(bN);bP=[bN];bQ={$:1,$0:bO};return function(bR){B.PrepareTemplateStrict(bL,bM,bP,bQ,bR);};};B.TextHoleRE=function(){T.$cctor();return T.TextHoleRE;};C.Sample=function(){M.$cctor();return M.Sample;};C.Main=function(bL){var bM;bM=p.Element("div",r.Empty,C.MkField(a.speechSynthesis,new a.SpeechSynthesisUtterance()));B.LoadLocalTemplates("");p.Run(bL,bM);};C.MkField=function(bL,bM){function bN(bO,bP){var bQ,bR,bS;bQ=_9.Create$1(bO);bR=p.InputArea([w.Create("width","200")],bQ);bS=p.Element("button",[y.Handler("click",function(){return function(){bM.text=bQ.Get();bM.lang=bP;return bL.speak(bM);};})],[p.TextNode("Speak!")]);return p.Element("div",[w.Create("style","margin: 5px; display: inline-block;")],[bR,p.Element("br",[],[]),bS]);}return o.map(function(bO){return bN(bO[0],bO[1]);},C.Texts());};C.Texts=function(){M.$cctor();return M.Texts;};D.Sample=function(){N.$cctor();return N.Sample;};D.Main=function(bL){var bM,bN,bO,bP,bQ,bR;bM=_9.Create$1("");bN=p.Element("div",[],[p.TextNode("Speak loud and clear.")]);bO=p.Element("pre",[w.Create("style","width: 550px; height: 300px; overflow-y: scroll; display: block;")],[p.TextView(bM.get_View())]);bP=(bQ=new(a.SpeecRecognition||a.webkitSpeechRecognition)(),bQ.lang="en-US",bQ.continuous=true,bQ.onresult=function(bS){var bT;H.iter(function(bU){bM.Set(bM.Get()+bU.transcript);},(bT=H.map(ba.ToArray,_7.array(ba.ToArray(bS.results),{$:1,$0:bS.resultIndex},null)),H.map(D.MaxConfidence(),bT)));bO.elt.scrollTop=bO.elt.scrollHeight;},bQ);bR=p.Element("div",[],[bN,bO,p.Element("button",[y.Handler("click",function(){return function(){return bP.start();};})],[p.TextNode("Start")]),p.Element("button",[y.Handler("click",function(){return function(){return bP.stop();};})],[p.TextNode("Stop")])]);B.LoadLocalTemplates("");p.Run(bL,bR);};D.MaxConfidence=function(){N.$cctor();return N.MaxConfidence;};E.Static=function(bL){return new w({$:3,$0:bL});};E.Updates=function(bL){return z.MapTreeReduce(function(bM){return bM.NChanged();},G.Const(),G.Map2Unit,bL.DynNodes);};E.AppendTree=function(bL,bM){var bN;return bL===null?bM:bM===null?bL:(bN=new w({$:2,$0:bL,$1:bM}),(E.SetFlags(bN,E.Flags(bL)|E.Flags(bM)),bN));};E.EmptyAttr=function(){bn.$cctor();return bn.EmptyAttr;};E.Insert=function(bL,bM){var bN,bO,bP;function bQ(bR){if(!(bR===null))if(bR!=null&&bR.$==1)bN.push(bR.$0);else if(bR!=null&&bR.$==2){bQ(bR.$0);bQ(bR.$1);}else if(bR!=null&&bR.$==3)bR.$0(bL);else if(bR!=null&&bR.$==4)bO.push(bR.$0);}bN=[];bO=[];bQ(bM);bP=bN.slice(0);return _4.New(bL,E.Flags(bM),bP,bO.length===0?null:{$:1,$0:function(bR){L.iter(function(bS){bS(bR);},bO);}});};E.HasExitAnim=function(bL){var bM;bM=2;return(bL.DynFlags&bM)===bM;};E.GetExitAnim=function(bL){return E.GetAnim(bL,function(bM,bN){return bM.NGetExitAnim(bN);});};E.HasEnterAnim=function(bL){var bM;bM=1;return(bL.DynFlags&bM)===bM;};E.GetEnterAnim=function(bL){return E.GetAnim(bL,function(bM,bN){return bM.NGetEnterAnim(bN);});};E.HasChangeAnim=function(bL){var bM;bM=4;return(bL.DynFlags&bM)===bM;};E.GetChangeAnim=function(bL){return E.GetAnim(bL,function(bM,bN){return bM.NGetChangeAnim(bN);});};E.SetFlags=function(bL,bM){bL.flags=bM;};E.Flags=function(bL){return bL!==null&&bL.hasOwnProperty("flags")?bL.flags:0;};E.GetAnim=function(bL,bM){return Y.Concat(H.map(function(bN){return bM(bN,bL.DynElem);},bL.DynNodes));};E.Sync=function(bL,bM){H.iter(function(bN){bN.NSync(bL);},bM.DynNodes);};E.Dynamic=function(bL,bM){return new w({$:1,$0:new bF.New(bL,bM)});};F.SetAttr=function(bL,bM,bN){bL.setAttribute(bM,bN);};F.CreateText=function(bL){return F.Doc().createTextNode(bL);};F.Doc=function(){V.$cctor();return V.Doc;};F.CreateElement=function(bL){return F.Doc().createElement(bL);};F.ChildrenArray=function(bL){var bM,bN,bO;bM=[];for(bN=0,bO=bL.childNodes.length-1;bN<=bO;bN++)bM.push(bL.childNodes[bN]);return bM;};F.IterSelector=function(bL,bM,bN){var bO,bP,bQ;bO=bL.querySelectorAll(bM);for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)bN(bO[bP]);};F.InsertAt=function(bL,bM,bN){var bO;if(!(bN.parentNode===bL&&bM===(bO=bN.nextSibling,v.Equals(bO,null)?null:bO)))bL.insertBefore(bN,bM);};F.RemoveNode=function(bL,bM){if(bM.parentNode===bL)bL.removeChild(bM);};G.Const=function(bL){var bM;bM=P.New({$:0,$0:bL});return function(){return bM;};};G.Map2Unit=function(bL,bM){return G.CreateLazy(function(){return P.Map2Unit(bL(),bM());});};G.CreateLazy=function(bL){var bM;bM={c:null,o:bL};return function(){var bN,bO;bN=bM.c;return bN===null?(bN=bM.o(),bM.c=bN,(bO=bN.s,bO!=null&&bO.$==0)?bM.o=null:P.WhenObsoleteRun(bN,function(){bM.c=null;}),bN):bN;};};G.Sink=function(bL,bM){function bN(){P.WhenRun(bM(),bL,function(){bl.scheduler().Fork(bN);});}bl.scheduler().Fork(bN);};G.Map=function(bL,bM){return G.CreateLazy(function(){return P.Map(bL,bM());});};G=l.View=bH.Class({},null,G);H.get=function(bL,bM){H.checkBounds(bL,bM);return bL[bM];};H.length=function(bL){return bL.dims===2?bL.length*bL.length:bL.length;};H.checkBounds=function(bL,bM){if(bM<0||bM>=bL.length)j.FailWith("Index was outside the bounds of the array.");};H.set=function(bL,bM,bN){H.checkBounds(bL,bM);bL[bM]=bN;};H.ofList=function(bL){var bM,bN;bN=[];bM=bL;while(!(bM.$==0)){bN.push(o.head(bM));bM=o.tail(bM);}return bN;};H.maxBy=function(bL,bM){var bN,bO,bP,bQ,bR,bS;H.nonEmpty(bM);bN=bM[0];bO=bL(bN);for(bP=1,bQ=bM.length-1;bP<=bQ;bP++){bR=bM[bP];bS=bL(bR);v.Compare(bS,bO)===1?(bN=bR,bO=bS):void 0;}return bN;};H.exists=function(bL,bM){var bN,bO,bP,bQ;bN=false;bO=0;bQ=H.length(bM);while(!bN&&bO<bQ)if(bL(bM[bO]))bN=true;else bO=bO+1;return bN;};H.tryPick=function(bL,bM){var bN,bO,bP;bN=null;bO=0;while(bO<bM.length&&bN==null){bP=bL(bM[bO]);bP!=null&&bP.$==1?bN=bP:void 0;bO=bO+1;}return bN;};H.tryFindIndex=function(bL,bM){var bN,bO;bN=null;bO=0;while(bO<bM.length&&bN==null){bL(bM[bO])?bN={$:1,$0:bO}:void 0;bO=bO+1;}return bN;};H.nonEmpty=function(bL){if(bL.length===0)j.FailWith("The input array was empty.");};H.map=function(bL,bM){var bN,bO,bP;bN=new a.Array(bM.length);for(bO=0,bP=bM.length-1;bO<=bP;bO++)bN[bO]=bL(bM[bO]);return bN;};H.iter=function(bL,bM){var bN,bO;for(bN=0,bO=bM.length-1;bN<=bO;bN++)bL(bM[bN]);};H.foldBack=function(bL,bM,bN){var bO,bP,bQ,bR,bS;bO=bN;bQ=bM.length;for(bR=1,bS=bQ;bR<=bS;bR++)bO=bL(bM[bQ-bR],bO);return bO;};H.filter=function(bL,bM){var bN,bO,bP;bN=[];for(bO=0,bP=bM.length-1;bO<=bP;bO++)if(bL(bM[bO]))bN.push(bM[bO]);return bN;};H.concat=function(bL){return a.Array.prototype.concat.apply([],H.ofSeq(bL));};H.pick=function(bL,bM){var bN;bN=H.tryPick(bL,bM);return bN==null?j.FailWith("KeyNotFoundException"):bN.$0;};H.ofSeq=function(bL){var bM,bN;if(bL instanceof a.Array)return bL.slice();else if(bL instanceof r)return H.ofList(bL);else{bM=[];bN=S.Get(bL);try{while(bN.MoveNext())bM.push(bN.Current());return bM;}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}}};H.choose=function(bL,bM){var bN,bO,bP,bQ;bN=[];for(bO=0,bP=bM.length-1;bO<=bP;bO++){bQ=bL(bM[bO]);bQ==null?void 0:bN.push(bQ.$0);}return bN;};H.create=function(bL,bM){var bN,bO,bP;bN=new a.Array(bL);for(bO=0,bP=bL-1;bO<=bP;bO++)bN[bO]=bM;return bN;};H.init=function(bL,bM){var bN,bO,bP;bL<0?j.FailWith("Negative size given."):null;bN=new a.Array(bL);for(bO=0,bP=bL-1;bO<=bP;bO++)bN[bO]=bM(bO);return bN;};H.forall=function(bL,bM){var bN,bO,bP,bQ;bN=true;bO=0;bQ=H.length(bM);while(bN&&bO<bQ)if(bL(bM[bO]))bO=bO+1;else bN=false;return bN;};K=J.Dictionary=bH.Class({set_Item:function(bL,bM){this.set(bL,bM);},ContainsKey:function(bL){var bM,bN;bM=this;bN=this.data[this.hash(bL)];return bN==null?false:H.exists(function(bO){return bM.equals.apply(null,[(j.KeyValue(bO))[0],bL]);},bN);},TryGetValue:function(bL,bM){var bN,bO,bP;bN=this;bO=this.data[this.hash(bL)];return bO==null?false:(bP=H.tryPick(function(bQ){var bR;bR=j.KeyValue(bQ);return bN.equals.apply(null,[bR[0],bL])?{$:1,$0:bR[1]}:null;},bO),bP!=null&&bP.$==1&&(bM.set(bP.$0),true));},Remove:function(bL){return this.remove(bL);},get_Keys:function(){return new _8.New(this);},set:function(bL,bM){var bN,bO,bP,bQ;bN=this;bO=this.hash(bL);bP=this.data[bO];bP==null?(this.count=this.count+1,this.data[bO]=new a.Array({K:bL,V:bM})):(bQ=H.tryFindIndex(function(bR){return bN.equals.apply(null,[(j.KeyValue(bR))[0],bL]);},bP),bQ==null?(this.count=this.count+1,bP.push({K:bL,V:bM})):bP[bQ.$0]={K:bL,V:bM});},remove:function(bL){var bM,bN,bO,bP;bM=this;bN=this.hash(bL);bO=this.data[bN];return bO==null?false:(bP=H.filter(function(bQ){return!bM.equals.apply(null,[(j.KeyValue(bQ))[0],bL]);},bO),H.length(bP)<bO.length&&(this.count=this.count-1,this.data[bN]=bP,true));},get_Item:function(bL){return this.get(bL);},get:function(bL){var bM,bN;bM=this;bN=this.data[this.hash(bL)];return bN==null?_5.notPresent():H.pick(function(bO){var bP;bP=j.KeyValue(bO);return bM.equals.apply(null,[bP[0],bL])?{$:1,$0:bP[1]}:null;},bN);},GetEnumerator:function(){return S.Get0(this);},GetEnumerator0:function(){return S.Get0(H.concat(h.GetFieldValues(this.data)));}},k,K);K.New$5=bH.Ctor(function(){K.New$6.call(this,[],v.Equals,v.Hash);},K);K.New$6=bH.Ctor(function(bL,bM,bN){var bO,bP;k.New.call(this);this.equals=bM;this.hash=bN;this.count=0;this.data=[];bO=S.Get(bL);try{while(bO.MoveNext()){bP=bO.Current();this.set(bP.K,bP.V);}}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}},K);L.delay=function(bL){return{GetEnumerator:function(){return S.Get(bL());}};};L.collect=function(bL,bM){return L.concat(L.map(bL,bM));};L.head=function(bL){var bM;bM=S.Get(bL);try{return bM.MoveNext()?bM.Current():L.insufficient();}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};L.concat=function(bL){return{GetEnumerator:function(){var bM;bM=S.Get(bL);return new X.New(null,null,function(bN){var bO;while(true){bO=bN.s;if(v.Equals(bO,null)){if(bM.MoveNext()){bN.s=S.Get(bM.Current());bN=bN;}else{bM.Dispose();return false;}}else if(bO.MoveNext()){bN.c=bO.Current();return true;}else{bN.Dispose();bN.s=null;bN=bN;}}},function(bN){var bO;bO=bN.s;!v.Equals(bO,null)?bO.Dispose():void 0;!v.Equals(bM,null)?bM.Dispose():void 0;});}};};L.map=function(bL,bM){return{GetEnumerator:function(){var bN;bN=S.Get(bM);return new X.New(null,null,function(bO){return bN.MoveNext()&&(bO.c=bL(bN.Current()),true);},function(){bN.Dispose();});}};};L.fold=function(bL,bM,bN){var bO,bP;bO=bM;bP=S.Get(bN);try{while(bP.MoveNext())bO=bL(bO,bP.Current());return bO;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};L.iter=function(bL,bM){var bN;bN=S.Get(bM);try{while(bN.MoveNext())bL(bN.Current());}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}};L.append=function(bL,bM){return{GetEnumerator:function(){var bN,bO;bN=S.Get(bL);bO=[true];return new X.New(bN,null,function(bP){var bQ;return bP.s.MoveNext()?(bP.c=bP.s.Current(),true):(bQ=bP.s,!v.Equals(bQ,null)?bQ.Dispose():void 0,bP.s=null,bO[0]&&(bO[0]=false,bP.s=S.Get(bM),bP.s.MoveNext()?(bP.c=bP.s.Current(),true):(bP.s.Dispose(),bP.s=null,false)));},function(bP){var bQ;bQ=bP.s;!v.Equals(bQ,null)?bQ.Dispose():void 0;});}};};L.max=function(bL){var bM,bN,bO;bM=S.Get(bL);try{if(!bM.MoveNext())L.seqEmpty();bN=bM.Current();while(bM.MoveNext()){bO=bM.Current();v.Compare(bO,bN)===1?bN=bO:void 0;}return bN;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};L.seqEmpty=function(){return j.FailWith("The input sequence was empty.");};M.$cctor=function(){M.$cctor=a.ignore;M.Texts=o.ofArray([["Hey! How are you doing?","en-US"],["Hey! How are you doing?","en-GB"],["Hallo! Wie geht's?","de-DE"],["Ciao! Come vÃ ?","it-IT"],["\u3053\u3093\u306b\u3061\u306f\u304a\u5143\u6c17\u3067\u3059\u304b","ja-JP"]]);M.Sample=d.Build().Id("SpeechUtterance").FileName("SpeechUtterance.fs").Keywords(o.ofArray(["user media","speech utterance","speech","TTS"])).Render(function(bL){C.Main(bL);}).Create();};N.$cctor=function(){N.$cctor=a.ignore;function bL(bM){return bM.confidence;}N.MaxConfidence=function(bM){return H.maxBy(bL,bM);};N.Sample=d.Build().Id("SpeechSynthesis").FileName("SpeechSynthesis.fs").Keywords(o.ofArray(["user media","speech synthesis","speech","speech-to-text"])).Render(function(bM){D.Main(bM);}).Create();};O.LinkElement=function(bL,bM){O.InsertDoc(bL,bM,null);};O.InsertDoc=function(bL,bM,bN){var bO;return bM!=null&&bM.$==1?O.InsertNode(bL,bM.$0.El,bN):bM!=null&&bM.$==2?(bO=bM.$0,(bO.Dirty=false,O.InsertDoc(bL,bO.Current,bN))):bM==null?bN:bM!=null&&bM.$==4?O.InsertNode(bL,bM.$0.Text,bN):bM!=null&&bM.$==5?O.InsertNode(bL,bM.$0,bN):bM!=null&&bM.$==6?H.foldBack(function(bP,bQ){return bP==null||bP.constructor===I?O.InsertDoc(bL,bP,bQ):O.InsertNode(bL,bP,bQ);},bM.$0.Els,bN):O.InsertDoc(bL,bM.$0,O.InsertDoc(bL,bM.$1,bN));};O.CreateRunState=function(bL,bM){return bc.New(bd.get_Empty(),O.CreateElemNode(bL,E.EmptyAttr(),bM));};O.PerformAnimatedUpdate=function(bL,bM,bN){var bO;return Y.get_UseAnimations()?(bO=null,bl.Delay(function(){var bP,bQ,bR;bP=bd.FindAll(bN);bQ=O.ComputeChangeAnim(bM,bP);bR=O.ComputeEnterAnim(bM,bP);return bl.Bind(Y.Play(Y.Append(bQ,O.ComputeExitAnim(bM,bP))),function(){return bl.Bind(O.SyncElemNodesNextFrame(bL,bM),function(){return bl.Bind(Y.Play(bR),function(){bM.PreviousNodes=bP;return bl.Return(null);});});});})):O.SyncElemNodesNextFrame(bL,bM);};O.PerformSyncUpdate=function(bL,bM,bN){var bO;bO=bd.FindAll(bN);O.SyncElemNode(bL,bM.Top);bM.PreviousNodes=bO;};O.InsertNode=function(bL,bM,bN){F.InsertAt(bL,bN,bM);return bM;};O.CreateElemNode=function(bL,bM,bN){var bO;O.LinkElement(bL,bN);bO=E.Insert(bL,bM);return Q.New(bO,bN,null,bL,bj.Int(),bH.GetOptional(bO.OnAfterRender));};O.SyncElemNodesNextFrame=function(bL,bM){function bN(bO){a.requestAnimationFrame(function(){O.SyncElemNode(bL,bM.Top);bO();});}return Z.BatchUpdatesEnabled()?bl.FromContinuations(function(bO,bP,bQ){return bN.apply(null,[bO,bP,bQ]);}):(O.SyncElemNode(bL,bM.Top),bl.Return(null));};O.ComputeExitAnim=function(bL,bM){return Y.Concat(H.map(function(bN){return E.GetExitAnim(bN.Attr);},bd.ToArray(bd.Except(bM,bd.Filter(function(bN){return E.HasExitAnim(bN.Attr);},bL.PreviousNodes)))));};O.ComputeEnterAnim=function(bL,bM){return Y.Concat(H.map(function(bN){return E.GetEnterAnim(bN.Attr);},bd.ToArray(bd.Except(bL.PreviousNodes,bd.Filter(function(bN){return E.HasEnterAnim(bN.Attr);},bM)))));};O.ComputeChangeAnim=function(bL,bM){var bN;function bO(bP){return E.HasChangeAnim(bP.Attr);}bN=function(bP){return bd.Filter(bO,bP);};return Y.Concat(H.map(function(bP){return E.GetChangeAnim(bP.Attr);},bd.ToArray(bd.Intersect(bN(bL.PreviousNodes),bN(bM)))));};O.SyncElemNode=function(bL,bM){!bL?O.SyncElement(bM):void 0;O.Sync(bM.Children);O.AfterRender(bM);};O.SyncElement=function(bL){function bM(bN){function bO(bP){var bQ,bR;return bP!=null&&bP.$==0?bO(bP.$0)||bO(bP.$1):bP!=null&&bP.$==2?(bQ=bP.$0,bQ.Dirty||bO(bQ.Current)):bP!=null&&bP.$==6&&(bR=bP.$0,bR.Dirty||H.exists(bM,bR.Holes));}return bO(bN.Children);}E.Sync(bL.El,bL.Attr);bM(bL)?O.DoSyncElement(bL):void 0;};O.Sync=function(bL){var bM,bN;if(bL!=null&&bL.$==1)O.SyncElemNode(false,bL.$0);else if(bL!=null&&bL.$==2)O.Sync(bL.$0.Current);else if(bL==null);else if(bL!=null&&bL.$==5);else if(bL!=null&&bL.$==4){bM=bL.$0;bM.Dirty?(bM.Text.nodeValue=bM.Value,bM.Dirty=false):void 0;}else if(bL!=null&&bL.$==6){bN=bL.$0;H.iter(function(bO){O.SyncElemNode(false,bO);},bN.Holes);H.iter(function(bO){E.Sync(bO[0],bO[1]);},bN.Attrs);O.AfterRender(bN);}else{O.Sync(bL.$0);O.Sync(bL.$1);}};O.AfterRender=function(bL){var bM;bM=bH.GetOptional(bL.Render);bM!=null&&bM.$==1?(bM.$0(bL.El),bH.SetOptional(bL,"Render",null)):void 0;};O.CreateTextNode=function(){return{Text:F.CreateText(""),Dirty:false,Value:""};};O.UpdateTextNode=function(bL,bM){bL.Value=bM;bL.Dirty=true;};O.DoSyncElement=function(bL){var bM,bN,bO;function bP(bQ,bR){var bS,bT;return bQ!=null&&bQ.$==1?bQ.$0.El:bQ!=null&&bQ.$==2?(bS=bQ.$0,bS.Dirty?(bS.Dirty=false,O.InsertDoc(bM,bS.Current,bR)):bP(bS.Current,bR)):bQ==null?bR:bQ!=null&&bQ.$==4?bQ.$0.Text:bQ!=null&&bQ.$==5?bQ.$0:bQ!=null&&bQ.$==6?(bT=bQ.$0,(bT.Dirty?bT.Dirty=false:void 0,H.foldBack(function(bU,bV){return bU==null||bU.constructor===I?bP(bU,bV):bU;},bT.Els,bR))):bP(bQ.$0,bP(bQ.$1,bR));}bM=bL.El;by.Iter((bN=bL.El,function(bQ){F.RemoveNode(bN,bQ);}),by.Except(by.DocChildren(bL),by.Children(bL.El,bH.GetOptional(bL.Delimiters))));bP(bL.Children,(bO=bH.GetOptional(bL.Delimiters),bO!=null&&bO.$==1?bO.$0[1]:null));};P.Map2Unit=function(bL,bM){var bN,bO,bP;function bQ(){var bR,bS,bT;if(!(bR=bP.s,bR!=null&&bR.$==0||bR!=null&&bR.$==2)){bS=P.ValueAndForever(bL);bT=P.ValueAndForever(bM);bS!=null&&bS.$==1?bT!=null&&bT.$==1?bS.$0[1]&&bT.$0[1]?P.MarkForever(bP,null):P.MarkReady(bP,null):void 0:void 0;}}bN=bL.s;bO=bM.s;return bN!=null&&bN.$==0?bO!=null&&bO.$==0?P.New({$:0,$0:null}):bM:bO!=null&&bO.$==0?bL:(bP=P.New({$:3,$0:[],$1:[]}),(P.When(bL,bQ,bP),P.When(bM,bQ,bP),bP));};P.WhenObsoleteRun=function(bL,bM){var bN;bN=bL.s;bN==null?bM():bN!=null&&bN.$==2?bN.$1.push(bM):bN!=null&&bN.$==3?bN.$1.push(bM):void 0;};P.ValueAndForever=function(bL){var bM;bM=bL.s;return bM!=null&&bM.$==0?{$:1,$0:[bM.$0,true]}:bM!=null&&bM.$==2?{$:1,$0:[bM.$0,false]}:null;};P.MarkForever=function(bL,bM){var bN,bO,bP,bQ;bN=bL.s;if(bN!=null&&bN.$==3){bL.s={$:0,$0:bM};bO=bN.$0;for(bP=0,bQ=H.length(bO)-1;bP<=bQ;bP++)(H.get(bO,bP))(bM);}else void 0;};P.MarkReady=function(bL,bM){var bN,bO,bP,bQ;bN=bL.s;if(bN!=null&&bN.$==3){bL.s={$:2,$0:bM,$1:bN.$1};bO=bN.$0;for(bP=0,bQ=H.length(bO)-1;bP<=bQ;bP++)(H.get(bO,bP))(bM);}else void 0;};P.When=function(bL,bM,bN){var bO;bO=bL.s;bO==null?P.Obsolete(bN):bO!=null&&bO.$==2?(P.EnqueueSafe(bO.$1,bN),bM(bO.$0)):bO!=null&&bO.$==3?(bO.$0.push(bM),P.EnqueueSafe(bO.$1,bN)):bM(bO.$0);};P.WhenRun=function(bL,bM,bN){var bO;bO=bL.s;bO==null?bN():bO!=null&&bO.$==2?(bO.$1.push(bN),bM(bO.$0)):bO!=null&&bO.$==3?(bO.$0.push(bM),bO.$1.push(bN)):bM(bO.$0);};P.EnqueueSafe=function(bL,bM){var bN,bO,bP,bQ;bL.push(bM);if(bL.length%20===0){bN=bL.slice(0);bu.Clear(bL);for(bO=0,bP=H.length(bN)-1;bO<=bP;bO++){bQ=H.get(bN,bO);typeof bQ=="object"?function(bR){if(bR.s)bL.push(bR);}(bQ):function(bR){bL.push(bR);}(bQ);}}else void 0;};P.Copy=function(bL){var bM,bN,bO;bM=bL.s;return bM==null?bL:bM!=null&&bM.$==2?(bN=P.New({$:2,$0:bM.$0,$1:[]}),(P.WhenObsolete(bL,bN),bN)):bM!=null&&bM.$==3?(bO=P.New({$:3,$0:[],$1:[]}),(P.When(bL,function(bP){P.MarkDone(bO,bL,bP);},bO),bO)):bL;};P.WhenObsolete=function(bL,bM){var bN;bN=bL.s;bN==null?P.Obsolete(bM):bN!=null&&bN.$==2?P.EnqueueSafe(bN.$1,bM):bN!=null&&bN.$==3?P.EnqueueSafe(bN.$1,bM):void 0;};P.MarkDone=function(bL,bM,bN){var bO;if(bO=bM.s,bO!=null&&bO.$==0)P.MarkForever(bL,bN);else P.MarkReady(bL,bN);};P.Map=function(bL,bM){var bN,bO;bN=bM.s;return bN!=null&&bN.$==0?P.New({$:0,$0:bL(bN.$0)}):(bO=P.New({$:3,$0:[],$1:[]}),(P.When(bM,function(bP){P.MarkDone(bO,bM,bL(bP));},bO),bO));};Q=l.DocElemNode=bH.Class({Equals:function(bL){return this.ElKey===bL.ElKey;},GetHashCode:function(){return this.ElKey;}},null,Q);Q.New=function(bL,bM,bN,bO,bP,bQ){var bR;return new Q((bR={Attr:bL,Children:bM,El:bO,ElKey:bP},(bH.SetOptional(bR,"Delimiters",bN),bH.SetOptional(bR,"Render",bQ),bR)));};S.Get=function(bL){return bL instanceof a.Array?S.ArrayEnumerator(bL):v.Equals(typeof bL,"string")?S.StringEnumerator(bL):bL.GetEnumerator();};S.ArrayEnumerator=function(bL){return new X.New(0,null,function(bM){var bN;bN=bM.s;return bN<H.length(bL)&&(bM.c=H.get(bL,bN),bM.s=bN+1,true);},void 0);};S.StringEnumerator=function(bL){return new X.New(0,null,function(bM){var bN;bN=bM.s;return bN<bL.length&&(bM.c=bL[bN],bM.s=bN+1,true);},void 0);};S.Get0=function(bL){return bL instanceof a.Array?S.ArrayEnumerator(bL):v.Equals(typeof bL,"string")?S.StringEnumerator(bL):"GetEnumerator0"in bL?bL.GetEnumerator0():bL.GetEnumerator();};T.$cctor=function(){T.$cctor=a.ignore;T.LoadedTemplates=new K.New$5();T.LocalTemplatesLoaded=false;T.TextHoleRE="\\${([^}]+)}";};U=J.HashSet=bH.Class({Add:function(bL){return this.add(bL);},Contains:function(bL){var bM;bM=this.data[this.hash(bL)];return bM==null?false:this.arrContains(bL,bM);},add:function(bL){var bM,bN;bM=this.hash(bL);bN=this.data[bM];return bN==null?(this.data[bM]=[bL],this.count=this.count+1,true):this.arrContains(bL,bN)?false:(bN.push(bL),this.count=this.count+1,true);},arrContains:function(bL,bM){var bN,bO,bP,bQ;bN=true;bO=0;bQ=bM.length;while(bN&&bO<bQ)if(this.equals.apply(null,[bM[bO],bL]))bN=false;else bO=bO+1;return!bN;},ExceptWith:function(bL){var bM;bM=S.Get(bL);try{while(bM.MoveNext())this.Remove(bM.Current());}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bL){var bM,bN,bO,bP;bM=0;bN=bo.concat(this.data);for(bO=0,bP=bN.length-1;bO<=bP;bO++)H.set(bL,bO,bN[bO]);},IntersectWith:function(bL){var bM,bN,bO,bP,bQ;bM=new U.New$4(bL,this.equals,this.hash);bN=bo.concat(this.data);for(bO=0,bP=bN.length-1;bO<=bP;bO++){bQ=bN[bO];!bM.Contains(bQ)?this.Remove(bQ):void 0;}},Remove:function(bL){var bM;bM=this.data[this.hash(bL)];return bM==null?false:this.arrRemove(bL,bM)&&(this.count=this.count-1,true);},arrRemove:function(bL,bM){var bN,bO,bP,bQ;bN=true;bO=0;bQ=bM.length;while(bN&&bO<bQ)if(this.equals.apply(null,[bM[bO],bL])){bM.splice.apply(bM,[bO,1]);bN=false;}else bO=bO+1;return!bN;},GetEnumerator:function(){return S.Get(bo.concat(this.data));},GetEnumerator0:function(){return S.Get(bo.concat(this.data));}},k,U);U.New$3=bH.Ctor(function(){U.New$4.call(this,[],v.Equals,v.Hash);},U);U.New$4=bH.Ctor(function(bL,bM,bN){var bO;k.New.call(this);this.equals=bM;this.hash=bN;this.data=[];this.count=0;bO=S.Get(bL);try{while(bO.MoveNext())this.add(bO.Current());}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}},U);U.New$2=bH.Ctor(function(bL){U.New$4.call(this,bL,v.Equals,v.Hash);},U);V.$cctor=function(){V.$cctor=a.ignore;V.Doc=self.document;};W=d.Builder=bH.Class({Create:function(){var bL,bM,bN;bL=d.req("Id",d.op_PlusPlus(this.BId,this.BTitle));bM=(bN=d.op_PlusPlus(this.BTitle,this.BId),bN==null?"Sample":bN.$0);return i.New(d.req("FileName",this.BFileName),bL,this.BKeywords,d.req("Render",this.BRender),bM);},Render:function(bL){this.BRender={$:1,$0:bL};return this;},Keywords:function(bL){this.BKeywords=bL;return this;},FileName:function(bL){this.BFileName={$:1,$0:bL};return this;},Id:function(bL){this.BId={$:1,$0:bL};return this;}},null,W);W.New=function(bL,bM,bN,bO,bP){return new W({BFileName:bL,BId:bM,BKeywords:bN,BRender:bO,BTitle:bP});};X=S.T=bH.Class({MoveNext:function(){return this.n(this);},Current:function(){return this.c;},Dispose:function(){if(this.d)this.d(this);}},k,X);X.New=bH.Ctor(function(bL,bM,bN,bO){k.New.call(this);this.s=bL;this.c=bM;this.n=bN;this.d=bO;},X);Y.get_UseAnimations=function(){return be.UseAnimations();};Y.Play=function(bL){var bM;bM=null;return bl.Delay(function(){return bl.Bind(Y.Run(a.ignore,be.Actions(bL)),function(){be.Finalize(bL);return bl.Return(null);});});};Y.Append=function(bL,bM){return{$:0,$0:bm.Append(bL.$0,bM.$0)};};Y.Run=function(bL,bM){var bN;function bO(bP){function bQ(bR,bS){var bT;bT=bS-bR;bM.Compute(bT);bL();return bT<=bN?void a.requestAnimationFrame(function(bU){bQ(bR,bU);}):bP();}a.requestAnimationFrame(function(bR){bQ(bR,bR);});}bN=bM.Duration;return bN===0?bl.Zero():bl.FromContinuations(function(bP,bQ,bR){return bO.apply(null,[bP,bQ,bR]);});};Y.Concat=function(bL){return{$:0,$0:bm.Concat(L.map(be.List,bL))};};Y.get_Empty=function(){return{$:0,$0:bm.Empty()};};Z.BatchUpdatesEnabled=function(){bf.$cctor();return bf.BatchUpdatesEnabled;};_1.StartProcessor=function(bL){var bM;function bN(){var bO;bO=null;return bl.Delay(function(){return bl.Bind(bL,function(){var bP;bP=bM[0];return bP===1?(bM[0]=0,bl.Zero()):bP===2?(bM[0]=1,bN()):bl.Zero();});});}bM=[0];return function(){var bO;bO=bM[0];bO===0?(bM[0]=1,bl.Start(bN(),null)):bO===1?bM[0]=2:void 0;};};_2=l.Elt=bH.Class({},p,_2);_2.New=function(bL,bM,bN){var bO,bP;bO=O.CreateElemNode(bL,bM,bN.docNode);bP=bg.Create(bN.updates);return new _2.New$1({$:1,$0:bO},G.Map2Unit(E.Updates(bO.Attr),bP.v),bL,bP);};_2.New$1=bH.Ctor(function(bL,bM,bN,bO){p.New.call(this,bL,bM);this.docNode$1=bL;this.updates$1=bM;this.elt=bN;this.rvUpdates=bO;},_2);_4.New=function(bL,bM,bN,bO){var bP;bP={DynElem:bL,DynFlags:bM,DynNodes:bN};bH.SetOptional(bP,"OnAfterRender",bO);return bP;};P.Obsolete=function(bL){var bM,bN,bO,bP,bQ;bN=bL.s;if(bN==null||(bN!=null&&bN.$==2?(bM=bN.$1,false):bN!=null&&bN.$==3?(bM=bN.$1,false):true))void 0;else{bL.s=null;for(bO=0,bP=H.length(bM)-1;bO<=bP;bO++){bQ=H.get(bM,bO);typeof bQ=="object"?function(bR){P.Obsolete(bR);}(bQ):bQ();}}};P.New=function(bL){return{s:bL};};_5.notPresent=function(){return j.FailWith("The given key was not present in the dictionary.");};_6.convertTextNode=function(bL){var bM,bN,bO,bP,bQ,bR;bM=null;bN=0;bP=bL.textContent;bQ=new a.RegExp(B.TextHoleRE(),"g");while(bM=bQ.exec(bP),bM!==null){bL.parentNode.insertBefore(self.document.createTextNode(_7.string(bP,{$:1,$0:bN},{$:1,$0:bQ.lastIndex-H.get(bM,0).length-1})),bL);bN=bQ.lastIndex;bR=self.document.createElement("span");bR.setAttribute("ws-replace",H.get(bM,1).toLowerCase());bL.parentNode.insertBefore(bR,bL);}bQ.lastIndex=0;bL.textContent=_7.string(bP,{$:1,$0:bN},null);};_6.failNotLoaded=function(bL){bI.warn("Instantiating non-loaded template",bL);};_6.fillTextHole=function(bL,bM,bN){var bO;bO=bL.querySelector("[ws-replace]");return v.Equals(bO,null)?(bI.warn("Filling non-existent text hole",bN),null):(bO.parentNode.replaceChild(new a.Text(bM),bO),{$:1,$0:bO.getAttribute("ws-replace")});};_6.removeHolesExcept=function(bL,bM){function bN(bO){F.IterSelector(bL,"["+bO+"]",function(bP){if(!bM.Contains(bP.getAttribute(bO)))bP.removeAttribute(bO);});}bN("ws-attr");bN("ws-onafterrender");bN("ws-var");F.IterSelector(bL,"[ws-hole]",function(bO){if(!bM.Contains(bO.getAttribute("ws-hole"))){bO.removeAttribute("ws-hole");while(bO.hasChildNodes())bO.removeChild(bO.lastChild);}});F.IterSelector(bL,"[ws-replace]",function(bO){if(!bM.Contains(bO.getAttribute("ws-replace")))bO.parentNode.removeChild(bO);});F.IterSelector(bL,"[ws-on]",function(bO){bO.setAttribute("ws-on",bh.concat(" ",H.filter(function(bP){return bM.Contains(H.get(bh.SplitChars(bP,[":"],1),1));},bh.SplitChars(bO.getAttribute("ws-on"),[" "],1))));});F.IterSelector(bL,"[ws-attr-holes]",function(bO){var bP,bQ,bR,bS,bT;bP=bh.SplitChars(bO.getAttribute("ws-attr-holes"),[" "],1);for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++){bS=H.get(bP,bQ);bO.setAttribute(bS,(bT=new a.RegExp(B.TextHoleRE(),"g"),bO.getAttribute(bS).replace(bT,function(bU,bV){return bM.Contains(bV)?bU:"";})));}});};_6.fillInstanceAttrs=function(bL,bM){var bN,bO,bP,bQ,bR;_6.convertAttrs(bM);bN=bM.nodeName.toLowerCase();bO=bL.querySelector("[ws-attr="+bN+"]");if(v.Equals(bO,null))bI.warn("Filling non-existent attr hole",bN);else{bO.removeAttribute("ws-attr");for(bP=0,bQ=bM.attributes.length-1;bP<=bQ;bP++){bR=bM.attributes.item(bP);bR.name==="class"&&bO.hasAttribute("class")?bO.setAttribute("class",bO.getAttribute("class")+" "+bR.nodeValue):bO.setAttribute(bR.name,bR.nodeValue);}}};_6.mapHoles=function(bL,bM){function bN(bO){F.IterSelector(bL,"["+bO+"]",function(bP){var bQ,bR;bQ=(bR=null,[bM.TryGetValue(bP.getAttribute(bO).toLowerCase(),{get:function(){return bR;},set:function(bS){bR=bS;}}),bR]);bQ[0]?bP.setAttribute(bO,bQ[1]):void 0;});}bN("ws-hole");bN("ws-replace");bN("ws-attr");bN("ws-onafterrender");bN("ws-var");F.IterSelector(bL,"[ws-on]",function(bO){bO.setAttribute("ws-on",bh.concat(" ",H.map(function(bP){var bQ,bR,bS;bQ=bh.SplitChars(bP,[":"],1);bR=(bS=null,[bM.TryGetValue(H.get(bQ,1),{get:function(){return bS;},set:function(bT){bS=bT;}}),bS]);return bR[0]?H.get(bQ,0)+":"+bR[1]:bP;},bh.SplitChars(bO.getAttribute("ws-on"),[" "],1))));});F.IterSelector(bL,"[ws-attr-holes]",function(bO){var bP,bQ,bR;bP=bh.SplitChars(bO.getAttribute("ws-attr-holes"),[" "],1);for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)(function(){var bS;function bT(bU,bV){var bW;bW=j.KeyValue(bV);return bU.replace(new a.RegExp("\\${"+bW[0]+"}","ig"),"${"+bW[1]+"}");}bS=H.get(bP,bQ);return bO.setAttribute(bS,(((bH.Curried3(L.fold))(bT))(bO.getAttribute(bS)))(bM));}());});};_6.fill=function(bL,bM,bN){while(true)if(bL.hasChildNodes())bN=bM.insertBefore(bL.lastChild,bN);else return null;};_6.convertAttrs=function(bL){var bN,bO,bP,bQ,bR,bS,bT,bU;function bM(bV){var bW;bW=bL.getAttribute(bV);bW===null?void 0:bL.setAttribute(bV,bW.toLowerCase());}bN=bL.attributes;bO=[];bP=[];bQ=[];for(bR=0,bS=bN.length-1;bR<=bS;bR++){bT=bN.item(bR);bh.StartsWith(bT.nodeName,"ws-on")&&bT.nodeName!=="ws-onafterrender"&&bT.nodeName!=="ws-on"?(bO.push(bT.nodeName),bP.push(_7.string(bT.nodeName,{$:1,$0:"ws-on".length},null)+":"+bT.nodeValue.toLowerCase())):!bh.StartsWith(bT.nodeName,"ws-")&&(new a.RegExp(B.TextHoleRE())).test(bT.nodeValue)?(bT.nodeValue=(bU=new a.RegExp(B.TextHoleRE(),"g"),bT.nodeValue.replace(bU,function(bV,bW){return"${"+bW.toLowerCase()+"}";})),bQ.push(bT.nodeName)):void 0;}!(bP.length==0)?bL.setAttribute("ws-on",bh.concat(" ",bP)):void 0;!(bQ.length==0)?bL.setAttribute("ws-attr-holes",bh.concat(" ",bQ)):void 0;bM("ws-hole");bM("ws-replace");bM("ws-attr");bM("ws-onafterrender");bM("ws-var");H.iter(function(bV){bL.removeAttribute(bV);},bO);};_7.string=function(bL,bM,bN){return bM==null?bN!=null&&bN.$==1?bL.slice(0,bN.$0+1):"":bN==null?bL.slice(bM.$0):bL.slice(bM.$0,bN.$0+1);};_7.array=function(bL,bM,bN){return bM==null?bN!=null&&bN.$==1?bL.slice(0,bN.$0+1):[]:bN==null?bL.slice(bM.$0):bL.slice(bM.$0,bN.$0+1);};L.insufficient=function(){return j.FailWith("The input sequence has an insufficient number of elements.");};_8=J.KeyCollection=bH.Class({GetEnumerator$1:function(){return S.Get(L.map(function(bL){return bL.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},k,_8);_8.New=bH.Ctor(function(bL){k.New.call(this);this.d=bL;},_8);_9=l.Var$1=bH.Class({},k,_9);_9.Create$1=function(bL){return new bi.New(false,P.New({$:2,$0:bL,$1:[]}),bL);};_=l.Var=bH.Class({},k,_);_.New=bH.Ctor(function(){k.New.call(this);},_);ba.ToArray=function(bL){return H.ofList(function(bM,bN){var bO;while(true)if(bM===-1)return bN;else{bO=bM;bM=bO-1;bN=new r({$:1,$0:bL.item(bO),$1:bN});}}(bL.length-1,r.Empty));};bc.New=function(bL,bM){return{PreviousNodes:bL,Top:bM};};bd.get_Empty=function(){return{$:0,$0:new U.New$3()};};bd.FindAll=function(bL){var bM;function bN(bP){if(bP!=null&&bP.$==0){bN(bP.$0);bN(bP.$1);}else if(bP!=null&&bP.$==1)bO(bP.$0);else if(bP!=null&&bP.$==2)bN(bP.$0.Current);else if(bP!=null&&bP.$==6)H.iter(bO,bP.$0.Holes);}function bO(bP){bM.push(bP);bN(bP.Children);}bM=[];bN(bL);return{$:0,$0:new U.New$2(bM)};};bd.Filter=function(bL,bM){return{$:0,$0:bt.Filter(bL,bM.$0)};};bd.Except=function(bL,bM){return{$:0,$0:bt.Except(bL.$0,bM.$0)};};bd.ToArray=function(bL){return bt.ToArray(bL.$0);};bd.Intersect=function(bL,bM){return{$:0,$0:bt.Intersect(bL.$0,bM.$0)};};be.UseAnimations=function(){bk.$cctor();return bk.UseAnimations;};be.Actions=function(bL){return be.ConcatActions(H.choose(function(bM){return bM.$==1?{$:1,$0:bM.$0}:null;},bm.ToArray(bL.$0)));};be.Finalize=function(bL){H.iter(function(bM){if(bM.$==0)bM.$0();},bm.ToArray(bL.$0));};be.ConcatActions=function(bL){var bM,bN,bO,bP;bM=z.ofSeqNonCopying(bL);bN=H.length(bM);return bN===0?be.Const():bN===1?H.get(bM,0):(bO=L.max(L.map(function(bQ){return bQ.Duration;},bM)),(bP=H.map(function(bQ){return be.Prolong(bO,bQ);},bM),be.Def(bO,function(bQ){H.iter(function(bR){bR.Compute(bQ);},bP);})));};be.List=function(bL){return bL.$0;};be.Const=function(bL){return be.Def(0,function(){return bL;});};be.Def=function(bL,bM){return{Compute:bM,Duration:bL};};be.Prolong=function(bL,bM){var bN,bO,bP;bN=bM.Compute;bO=bM.Duration;bP=bB.Create(function(){return bM.Compute(bM.Duration);});return{Compute:function(bQ){return bQ>=bO?bP.f():bN(bQ);},Duration:bL};};bf.$cctor=function(){bf.$cctor=a.ignore;bf.BatchUpdatesEnabled=true;};bg=l.Updates=bH.Class({},null,bg);bg.Create=function(bL){var bM;bM=null;bM=bg.New(bL,null,function(){var bN;bN=bM.s;return bN===null?(bN=P.Copy(bM.c()),bM.s=bN,P.WhenObsoleteRun(bN,function(){bM.s=null;}),bN):bN;});return bM;};bg.New=function(bL,bM,bN){return new bg({c:bL,s:bM,v:bN});};bh.concat=function(bL,bM){return H.ofSeq(bM).join(bL);};bh.SplitChars=function(bL,bM,bN){return bh.Split(bL,new a.RegExp("["+bh.RegexEscape(bM.join(""))+"]"),bN);};bh.StartsWith=function(bL,bM){return bL.substring(0,bM.length)==bM;};bh.Split=function(bL,bM,bN){return bN===1?H.filter(function(bO){return bO!=="";},bh.SplitWith(bL,bM)):bh.SplitWith(bL,bM);};bh.RegexEscape=function(bL){return bL.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bh.SplitWith=function(bL,bM){return bL.split(bM);};bi=l.ConcreteVar=bH.Class({get_View:function(){return this.view;},Get:function(){return this.current;},Set:function(bL){if(this.isConst)(function(bM){return bM("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bM){bI.log(bM);}));else{P.Obsolete(this.snap);this.current=bL;this.snap=P.New({$:2,$0:bL,$1:[]});}},UpdateMaybe:function(bL){var bM;bM=bL(this.Get());bM!=null&&bM.$==1?this.Set(bM.$0):void 0;}},_,bi);bi.New=bH.Ctor(function(bL,bM,bN){var bO;bO=this;_.New.call(this);this.isConst=bL;this.current=bN;this.snap=bM;this.view=function(){return bO.snap;};this.id=bj.Int();},bi);bj.Int=function(){bj.set_counter(bj.counter()+1);return bj.counter();};bj.set_counter=function(bL){bv.$cctor();bv.counter=bL;};bj.counter=function(){bv.$cctor();return bv.counter;};bk.$cctor=function(){bk.$cctor=a.ignore;bk.CubicInOut=bp.Custom(function(bL){var bM;bM=bL*bL;return 3*bM-2*(bM*bL);});bk.UseAnimations=true;};bl.Delay=function(bL){return function(bM){try{(bL(null))(bM);}catch(bN){bM.k({$:1,$0:bN});}};};bl.Bind=function(bL,bM){return bl.checkCancel(function(bN){bL(bq.New(function(bO){var bP;if(bO.$==0){bP=bO.$0;bl.scheduler().Fork(function(){try{(bM(bP))(bN);}catch(bQ){bN.k({$:1,$0:bQ});}});}else bl.scheduler().Fork(function(){bN.k(bO);});},bN.ct));});};bl.Zero=function(){br.$cctor();return br.Zero;};bl.Start=function(bL,bM){var bN,bO;bN=(bO=(bl.defCTS())[0],bM==null?bO:bM.$0);bl.scheduler().Fork(function(){if(!bN.c)bL(bq.New(function(bP){if(bP.$==1)bl.UncaughtAsyncError(bP.$0);},bN));});};bl.Return=function(bL){return function(bM){bM.k({$:0,$0:bL});};};bl.checkCancel=function(bL){return function(bM){if(bM.ct.c)bl.cancel(bM);else bL(bM);};};bl.defCTS=function(){br.$cctor();return br.defCTS;};bl.UncaughtAsyncError=function(bL){bI.log("WebSharper: Uncaught asynchronous exception",bL);};bl.FromContinuations=function(bL){return function(bM){var bN;function bO(bP){if(bN[0])j.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bN[0]=true;bl.scheduler().Fork(bP);}}bN=[false];bL(function(bP){bO(function(){bM.k({$:0,$0:bP});});},function(bP){bO(function(){bM.k({$:1,$0:bP});});},function(bP){bO(function(){bM.k({$:2,$0:bP});});});};};bl.cancel=function(bL){bL.k({$:2,$0:new bA.New(bL.ct)});};bl.scheduler=function(){br.$cctor();return br.scheduler;};bm.Append=function(bL,bM){return bL.$==0?bM:bM.$==0?bL:{$:2,$0:bL,$1:bM};};bm.ToArray=function(bL){var bM;function bN(bO){if(bO.$==1)bM.push(bO.$0);else if(bO.$==2){bN(bO.$0);bN(bO.$1);}else if(bO.$==3)H.iter(function(bP){bM.push(bP);},bO.$0);}bM=[];bN(bL);return bM.slice(0);};bm.Concat=function(bL){var bM;bM=z.ofSeqNonCopying(bL);return z.TreeReduce(bm.Empty(),bm.Append,bM);};bm.Empty=function(){bC.$cctor();return bC.Empty;};bn.$cctor=function(){bn.$cctor=a.ignore;bn.EmptyAttr=null;};bo.concat=function(bL){var bM,bN;bM=[];for(var bO in bL)bM.push.apply(bM,bL[bO]);return bM;};bp=l.Easing=bH.Class({},k,bp);bp.Custom=function(bL){return new bp.New(bL);};bp.New=bH.Ctor(function(bL){k.New.call(this);this.transformTime=bL;},bp);bq.New=function(bL,bM){return{k:bL,ct:bM};};br.$cctor=function(){br.$cctor=a.ignore;br.noneCT=bs.New(false,[]);br.scheduler=new bw.New();br.defCTS=[new bx.New()];br.Zero=bl.Return();br.GetCT=function(bL){bL.k({$:0,$0:bL.ct});};};bs.New=function(bL,bM){return{c:bL,r:bM};};bt.Filter=function(bL,bM){return new U.New$2(H.filter(bL,bt.ToArray(bM)));};bt.Except=function(bL,bM){var bN;bN=new U.New$2(bt.ToArray(bM));bN.ExceptWith(bt.ToArray(bL));return bN;};bt.ToArray=function(bL){var bM;bM=H.create(bL.get_Count(),void 0);bL.CopyTo(bM);return bM;};bt.Intersect=function(bL,bM){var bN;bN=new U.New$2(bt.ToArray(bL));bN.IntersectWith(bt.ToArray(bM));return bN;};bu.Clear=function(bL){bL.splice(0,H.length(bL));};bv.$cctor=function(){bv.$cctor=a.ignore;bv.counter=0;};bw=bl.Scheduler=bH.Class({Fork:function(bL){var bM;bM=this;this.robin.push(bL);this.idle?(this.idle=false,a.setTimeout(function(){bM.tick();},0)):void 0;},tick:function(){var bL,bM,bN;bM=this;bN=bK.now();bL=true;while(bL)if(this.robin.length===0){this.idle=true;bL=false;}else{(this.robin.shift())();bK.now()-bN>40?(a.setTimeout(function(){bM.tick();},0),bL=false):void 0;}}},k,bw);bw.New=bH.Ctor(function(){k.New.call(this);this.idle=true;this.robin=[];},bw);bx=f.CancellationTokenSource=bH.Class({},k,bx);bx.New=bH.Ctor(function(){k.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bx);by.Children=function(bL,bM){var bN,bO,bP;if(bM!=null&&bM.$==1){bP=[];bN=bM.$0[0].nextSibling;while(bN!==bM.$0[1]){bP.push(bN);bN=bN.nextSibling;}return{$:0,$0:bP};}else return{$:0,$0:H.init(bL.childNodes.length,(bO=bL.childNodes,function(bQ){return bO[bQ];}))};};by.Except=function(bL,bM){var bN;bN=bL.$0;return{$:0,$0:H.filter(function(bO){return H.forall(function(bP){return!(bO===bP);},bN);},bM.$0)};};by.Iter=function(bL,bM){H.iter(bL,bM.$0);};by.DocChildren=function(bL){var bM;function bN(bO){if(bO!=null&&bO.$==2)bN(bO.$0.Current);else if(bO!=null&&bO.$==1)bM.push(bO.$0.El);else if(bO==null);else if(bO!=null&&bO.$==5)bM.push(bO.$0);else if(bO!=null&&bO.$==4)bM.push(bO.$0.Text);else if(bO!=null&&bO.$==6)H.iter(function(bP){if(bP==null||bP.constructor===I)bN(bP);else bM.push(bP);},bO.$0.Els);else{bN(bO.$0);bN(bO.$1);}}bM=[];bN(bL.Children);return{$:0,$0:z.ofSeqNonCopying(bM)};};bA=f.OperationCanceledException=bH.Class({},bz,bA);bA.New=bH.Ctor(function(bL){bA.New$1.call(this,"The operation was canceled.",null,bL);},bA);bA.New$1=bH.Ctor(function(bL,bM,bN){this.message=bL;this.inner=bM;I.setPrototypeOf(this,bA.prototype);this.ct=bN;},bA);bB.Create=function(bL){return bE.New(false,bL,bB.forceLazy);};bB.forceLazy=function(){var bL;bL=this.v();this.c=true;this.v=bL;this.f=bB.cachedLazy;return bL;};bB.cachedLazy=function(){return this.v;};bC.$cctor=function(){bC.$cctor=a.ignore;bC.Empty={$:0};};bE.New=function(bL,bM,bN){return{c:bL,v:bM,f:bN};};bF=l.DynamicAttrNode=bH.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bL){return Y.get_Empty();},NGetEnterAnim:function(bL){return Y.get_Empty();},NGetChangeAnim:function(bL){return Y.get_Empty();},NSync:function(bL){if(this.dirty){(this.push(bL))(this.value);this.dirty=false;}}},k,bF);bF.New=bH.Ctor(function(bL,bM){var bN;bN=this;k.New.call(this);this.push=bM;this.value=void 0;this.dirty=false;this.updates=G.Map(function(bO){bN.value=bO;bN.dirty=true;},bL);},bF);bH.OnLoad(function(){c.Main();});}());


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
